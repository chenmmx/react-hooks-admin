{"version":3,"sources":["pages/chat/context/index.tsx","pages/chat/components/chat-navigation/index.tsx","pages/chat/components/sidebar-message/index.tsx","pages/chat/components/sidebar-friends/index.tsx","pages/chat/components/sidebar-favorites/index.tsx","pages/chat/components/chat-main/index.tsx","pages/chat/components/modal-add-group/index.tsx","pages/chat/index.tsx"],"names":["CHANGE_SELECT_COMMENT_ID","CHANGE_SELECT_NAV_KEY","CHANGE_SKIN","OPEN_MODAL","CLOSE_MODAL","CHANGE_MODAL_TYPE","defaultState","id","selectNavKey","mode","modalVisible","modalOptions","type","title","reducer","state","action","data","Error","menuList","key","icon","MessageOutlined","style","fontSize","name","messageCount","UserOutlined","StarOutlined","InboxOutlined","SkinOutlined","userMenu","map","menu","Item","target","rel","href","Divider","danger","Chat","useContext","Context","dispatch","className","src","alt","placement","onClick","onNavClick","dot","count","overlay","trigger","latestNews","time","avatar","SidebarMessage","UsergroupAddOutlined","PlusCircleOutlined","placeholder","size","tabIndex","itemLayout","dataSource","renderItem","item","Meta","description","label","SidebarFriends","SidebarFavorites","BScroll","use","MouseWheel","PullDown","antIcon","LoadingOutlined","spin","TextArea","scroll","result","status","message","content","date","fakeData","fetchMoreData","pageIndex","pageSize","Promise","resolve","reject","setTimeout","Number","ChatMain","useState","isPullingDown","setIsPullingDown","comments","setComments","useEffect","prev","a","refresh","scrollToBottom","fetchData","scrollX","scrollY","click","pullDownRefresh","mouseWheel","speed","pullingDownHandler","finishPullDown","on","stop","destroy","scrollTo","maxScrollY","PhoneTwoTone","VideoCameraTwoTone","EllipsisOutlined","indicator","spinning","comment","join","rows","SmileOutlined","console","log","ModalAddGroup","useForm","form","loading","setLoading","layout","Group","maxCount","maxStyle","color","backgroundColor","i","createContext","useReducer","ModelContent","Provider","value","visible","onCancel","footer"],"mappings":"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","file":"static/js/9.b4db56df.chunk.js","sourcesContent":["import React from 'react';\n\n// 选择的对话id\nexport const CHANGE_SELECT_COMMENT_ID = 'CHANGE_SELECT_COMMENT_ID';\n// 选择的navbar的key\nexport const CHANGE_SELECT_NAV_KEY = 'CHANGE_SELECT_NAV_KEY';\n// 切换皮肤\nexport const CHANGE_SKIN = 'CHANGE_SKIN';\n// 对话框\nexport const OPEN_MODAL = 'OPEN_MODAL';\nexport const CLOSE_MODAL = 'CLOSE_MODAL';\n// 对话框type\nexport const CHANGE_MODAL_TYPE = 'CHANGE_MODAL_TYPE';\n\ninterface ModalOptions {\n  type: string;\n  title?: string;\n}\n\ntype StateType = {\n  id: string;\n  selectNavKey: string;\n  mode: string;\n  modalVisible: boolean;\n  modalOptions: ModalOptions;\n};\n\ntype ActionType = {\n  type: string;\n  data?: any;\n};\n\nexport type MixStateAndDispatch = {\n  state: StateType;\n  dispatch?: React.Dispatch<ActionType>;\n};\n\nexport const defaultState: StateType = {\n  id: '',\n  selectNavKey: 'message',\n  mode: 'primary',\n  modalVisible: false,\n  modalOptions: {\n    type: '',\n    title: '',\n  },\n};\n\nexport function reducer(state: StateType, action: ActionType) {\n  switch (action.type) {\n    case CHANGE_SELECT_COMMENT_ID:\n      return { ...state, id: action.data };\n    case CHANGE_SELECT_NAV_KEY:\n      return { ...state, selectNavKey: action.data };\n    case CHANGE_SKIN:\n      return { ...state, mode: action.data };\n    case OPEN_MODAL:\n      return { ...state, modalVisible: true };\n    case CLOSE_MODAL:\n      return { ...state, modalVisible: false };\n    case CHANGE_MODAL_TYPE:\n      return { ...state, modalOptions: action.data };\n    default:\n      throw new Error();\n  }\n}\n","/* eslint-disable no-script-url */\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { FC, ReactElement, useContext } from 'react';\nimport { Context } from '../../index';\nimport { CHANGE_SELECT_NAV_KEY, CHANGE_SELECT_COMMENT_ID, CHANGE_SKIN } from '../../context';\nimport {\n  MessageOutlined,\n  UserOutlined,\n  StarOutlined,\n  InboxOutlined,\n  SkinOutlined,\n} from '@ant-design/icons';\nimport { Badge, Menu, Tooltip, Dropdown } from 'antd';\nimport './index.less';\ninterface MenuObject {\n  id: number;\n  key: string;\n  icon: ReactElement;\n  name: string;\n  messageCount: number;\n}\n\ninterface UserMenuObj {\n  key: string;\n  name: string;\n}\n\nconst menuList: MenuObject[] = [\n  {\n    id: 1,\n    key: 'message',\n    icon: <MessageOutlined style={{ fontSize: '1.2rem' }} />,\n    name: '消息',\n    messageCount: 1,\n  },\n  {\n    id: 2,\n    key: 'friends',\n    icon: <UserOutlined style={{ fontSize: '1.2rem' }} />,\n    name: '朋友',\n    messageCount: 0,\n  },\n  {\n    id: 3,\n    key: 'favorites',\n    icon: <StarOutlined style={{ fontSize: '1.2rem' }} />,\n    name: '收藏',\n    messageCount: 0,\n  },\n  {\n    id: 4,\n    key: 'archived',\n    icon: <InboxOutlined style={{ fontSize: '1.2rem' }} />,\n    name: '存档',\n    messageCount: 0,\n  },\n  {\n    id: 5,\n    key: 'switch_skin',\n    icon: <SkinOutlined style={{ fontSize: '1.2rem' }} />,\n    name: '主题切换',\n    messageCount: 0,\n  },\n];\n\nconst userMenuList: UserMenuObj[] = [\n  {\n    key: 'editProfile',\n    name: '编辑资料',\n  },\n  {\n    key: 'profile',\n    name: '个人信息',\n  },\n  {\n    key: 'settings',\n    name: '设置',\n  },\n];\n\nconst userMenu: ReactElement = (\n  <Menu>\n    {userMenuList.map((menu) => {\n      return (\n        <Menu.Item key={menu.key}>\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"javascript:void(0);\">\n            {menu.name}\n          </a>\n        </Menu.Item>\n      );\n    })}\n    <Menu.Divider />\n    <Menu.Item danger={true}>\n      <span>退出登陆</span>\n    </Menu.Item>\n  </Menu>\n);\n\nconst Chat: FC = () => {\n  const { state, dispatch } = useContext(Context);\n\n  const onNavClick = (key: string) => {\n    if (key === 'switch_skin') {\n      if (dispatch) {\n        dispatch({ type: CHANGE_SKIN, data: state.mode === 'primary' ? 'dark' : 'primary' });\n      }\n    } else {\n      if (state.selectNavKey === key) return;\n      if (dispatch) {\n        dispatch({ type: CHANGE_SELECT_NAV_KEY, data: key });\n        dispatch({ type: CHANGE_SELECT_COMMENT_ID, data: '' });\n      }\n    }\n  };\n\n  return (\n    <div className=\"chat-layout-navigation\">\n      <div className=\"nav-group\">\n        <ul className=\"nav-group-list\">\n          <li className=\"nav-group-list-item logo\">\n            <a href=\"javascript:void(0);\">\n              <img\n                src=\"http://touxiangkong.com/uploads/allimg/20203301301/2020/3/YNVjqi.jpg\"\n                alt=\"\"\n              />\n            </a>\n          </li>\n          {menuList.map((menu) => {\n            return (\n              <li\n                className={menu.id === 4 ? 'nav-group-list-item brackets' : 'nav-group-list-item'}\n                key={menu.id}\n              >\n                <Tooltip placement=\"right\" title={menu.name}>\n                  <a\n                    href=\"javascript:void(0);\"\n                    className={state.selectNavKey === menu.key ? 'active' : ''}\n                    onClick={() => onNavClick(menu.key)}\n                  >\n                    <Badge dot={true} count={menu.messageCount}>\n                      {menu.icon}\n                    </Badge>\n                  </a>\n                </Tooltip>\n              </li>\n            );\n          })}\n          <li className=\"nav-group-list-item logo\">\n            <a href=\"javascript:void(0);\">\n              <Dropdown overlay={userMenu} trigger={['click']} placement=\"topLeft\">\n                <img src=\"https://api.sunweihu.com/api/sjtx/api.php\" alt=\"\" />\n              </Dropdown>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n","import React, { FC, useContext } from 'react';\nimport { Context } from '../../index';\nimport { CHANGE_SELECT_COMMENT_ID, OPEN_MODAL, CHANGE_MODAL_TYPE } from '../../context';\nimport { Button, Input, List, Avatar, Badge } from 'antd';\nimport { UsergroupAddOutlined, PlusCircleOutlined } from '@ant-design/icons';\n\nconst data = [\n  {\n    id: '1',\n    name: '张三',\n    latestNews: '你是傻逼吗？啊？',\n    time: '昨天',\n    messageCount: 12,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '2',\n    name: '李四',\n    latestNews: '周末一起出去玩啊',\n    time: '11:05 AM',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '3',\n    name: '王小二',\n    latestNews: 'Hello!',\n    time: '03:42 PM',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '4',\n    name: '葛二蛋',\n    latestNews: '你是傻逼吗？啊？',\n    time: '前天',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '5',\n    name: '葛二蛋',\n    latestNews: '你是傻逼吗？啊？',\n    time: '前天',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '6',\n    name: '葛二蛋',\n    latestNews: '你是傻逼吗？啊？',\n    time: '前天',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '7',\n    name: '葛二蛋',\n    latestNews: '你是傻逼吗？啊？',\n    time: '前天',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '8',\n    name: '葛二蛋',\n    latestNews: '你是傻逼吗？啊？',\n    time: '前天',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '9',\n    name: '葛二蛋',\n    latestNews: '你是傻逼吗？啊？',\n    time: '前天',\n    messageCount: 0,\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n];\n\nconst SidebarMessage: FC = () => {\n  const { state, dispatch } = useContext(Context);\n  const onMessageClick = (id: string): void => {\n    if (dispatch) {\n      dispatch({ type: CHANGE_SELECT_COMMENT_ID, data: id });\n    }\n  };\n  const onAddUserGroup = (): void => {\n    if (dispatch) {\n      dispatch({ type: OPEN_MODAL });\n      dispatch({ type: CHANGE_MODAL_TYPE, data: { type: 'add_group', title: '新增分组' } });\n    }\n  };\n\n  return (\n    <div className=\"sidebar sidebar-message\">\n      <header>\n        <span>消息</span>\n        <div className=\"btn-group\">\n          <Button icon={<UsergroupAddOutlined />} onClick={onAddUserGroup} />\n          <Button icon={<PlusCircleOutlined />} />\n        </div>\n      </header>\n      <div className=\"search-form\">\n        <Input placeholder=\"搜索聊天\" size=\"large\" />\n      </div>\n      <div className=\"sidebar-body\" tabIndex={2}>\n        <List\n          itemLayout=\"horizontal\"\n          dataSource={data}\n          renderItem={(item) => (\n            <List.Item\n              className={state.id === item.id ? 'active' : ''}\n              onClick={() => {\n                onMessageClick(item.id);\n              }}\n            >\n              <List.Item.Meta\n                avatar={\n                  <Badge count={item.messageCount}>\n                    <Avatar src={item.avatar + `?${item.id}`} />\n                  </Badge>\n                }\n                title={item.name}\n                description={item.latestNews}\n              />\n              <span className=\"text-muted\">{item.time}</span>\n            </List.Item>\n          )}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default SidebarMessage;\n","import React, { FC, useContext } from 'react';\nimport { Context } from '../../index';\nimport { CHANGE_SELECT_COMMENT_ID, CHANGE_SELECT_NAV_KEY } from '../../context';\nimport { Button, Input, List, Avatar } from 'antd';\nimport { UsergroupAddOutlined } from '@ant-design/icons';\n\nconst data = [\n  {\n    id: '1',\n    name: '张三',\n    label: 'Web Designer',\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '2',\n    name: '李四',\n    label: 'Web Designer',\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '3',\n    name: '王小二',\n    label: 'Web Designer',\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '4',\n    name: '葛二蛋',\n    label: 'Web Designer',\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n  {\n    id: '5',\n    name: '葛二蛋',\n    label: 'Web Designer',\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n  },\n];\n\nconst SidebarFriends: FC = () => {\n  const { dispatch } = useContext(Context);\n  const onMessageClick = (id: string): void => {\n    if (dispatch) {\n      dispatch({ type: CHANGE_SELECT_COMMENT_ID, data: id });\n      dispatch({ type: CHANGE_SELECT_NAV_KEY, data: 'message' });\n    }\n  };\n\n  return (\n    <div className=\"sidebar sidebar-friends\">\n      <header>\n        <span>朋友</span>\n        <div className=\"btn-group\">\n          <Button icon={<UsergroupAddOutlined />} />\n        </div>\n      </header>\n      <div className=\"search-form\">\n        <Input placeholder=\"搜索聊天\" size=\"large\" />\n      </div>\n      <div className=\"sidebar-body\" tabIndex={2}>\n        <List\n          itemLayout=\"horizontal\"\n          dataSource={data}\n          renderItem={(item) => (\n            <List.Item\n              onClick={() => {\n                onMessageClick(item.id);\n              }}\n            >\n              <List.Item.Meta\n                avatar={<Avatar src={item.avatar + `?${item.id}`} />}\n                title={item.name}\n                description={item.label}\n              />\n            </List.Item>\n          )}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default SidebarFriends;\n","import React, { FC } from 'react';\n\nconst SidebarFavorites: FC = () => {\n  return (\n    <div className=\"sidebar sidebar-friends\">\n      <header>\n        <span>收藏</span>\n      </header>\n    </div>\n  );\n};\n\nexport default SidebarFavorites;\n","import React, { FC, useEffect, useState, useContext } from 'react';\nimport './index.less';\nimport { Avatar, Button, Input, Spin } from 'antd';\nimport BScroll from '@better-scroll/core';\nimport MouseWheel from '@better-scroll/mouse-wheel';\nimport PullDown from '@better-scroll/pull-down';\nimport { Context } from '../../index';\nimport {\n  PhoneTwoTone,\n  VideoCameraTwoTone,\n  EllipsisOutlined,\n  SmileOutlined,\n  PlusCircleOutlined,\n  LoadingOutlined,\n} from '@ant-design/icons';\n\nBScroll.use(MouseWheel);\nBScroll.use(PullDown);\nconst antIcon = <LoadingOutlined style={{ fontSize: 24 }} spin={true} />;\nconst { TextArea } = Input;\nlet scroll: any = null;\nlet STEP = 0;\n\nconst result = {\n  status: 0,\n  message: 'success',\n  data: [\n    {\n      id: '0',\n      name: '糖糖',\n      content:\n        '哈哈哈哈哈哈哈哈哈哈哈，你真逗！哈哈哈哈哈哈哈哈哈哈哈，你真逗！哈哈哈哈哈哈哈哈哈哈哈，你真逗！哈哈哈哈哈哈哈哈哈哈哈，你真逗！',\n      avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n      type: 'mine',\n      date: '上午 9:20',\n    },\n    {\n      id: '1',\n      name: '嘟嘟',\n      content: '天王盖地虎！',\n      avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n      type: 'other',\n      date: '上午 9:32',\n    },\n    {\n      id: '2',\n      name: '嘟嘟',\n      content: '宝塔镇河妖！',\n      avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n      type: 'other',\n      date: '上午 9:33',\n    },\n    {\n      id: '3',\n      name: '嘟嘟',\n      content: '哈哈哈哈哈哈哈哈哈哈哈，我真逗！',\n      avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n      type: 'other',\n      date: '上午 9:35',\n    },\n    {\n      id: '4',\n      name: '糖糖',\n      content: '寒江孤影！',\n      avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n      type: 'mine',\n      date: '上午 9:40',\n    },\n  ],\n};\n\nconst fakeData = [\n  {\n    id: '99',\n    name: '糖糖',\n    content: '天上没有乌云盖！',\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n    type: 'mine',\n    date: '上午 8:20',\n  },\n  {\n    id: '88',\n    name: '嘟嘟',\n    content: '为什么你又掉下来？',\n    avatar: 'https://api.sunweihu.com/api/sjtx/api.php',\n    type: 'other',\n    date: '上午 8:32',\n  },\n];\n\nconst getData: any = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(result);\n    }, 600);\n  });\n};\n\nconst fetchMoreData: any = (id: string, pageIndex: number, pageSize: number) => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (Number(id) % 2 === 0) {\n        resolve({\n          status: 0,\n          message: 'success',\n          data: [],\n        });\n      } else {\n        resolve({\n          status: 0,\n          message: 'success',\n          data: fakeData,\n        });\n      }\n    }, 600);\n  });\n};\n\nconst ChatMain: FC = () => {\n  const { state } = useContext(Context);\n  const [isPullingDown, setIsPullingDown] = useState<boolean>(false);\n  const [comments, setComments] = useState<any>([]);\n\n  // fetch data\n  useEffect(() => {\n    setComments((prev: any) => (prev = []));\n    STEP = 0;\n    const fetchData = async () => {\n      const { data } = await getData(state.id);\n      setComments((prev: any) => (prev = data));\n      scroll.refresh();\n      scrollToBottom();\n    };\n    fetchData();\n  }, [state.id]);\n\n  // init bsscroll\n  useEffect(() => {\n    scroll = new BScroll('.chat-main .chat-main-body .chat-main-body-wrapper', {\n      scrollX: false,\n      scrollY: true,\n      click: true,\n      pullDownRefresh: true,\n      mouseWheel: {\n        speed: 10,\n      },\n    });\n\n    const pullingDownHandler = async () => {\n      STEP += 1;\n      setIsPullingDown((prev) => (prev = true));\n      const { data } = await fetchMoreData(state.id, STEP, 10);\n      setComments((prev: any) => [...data, ...prev]);\n      setIsPullingDown((prev: boolean) => (prev = false));\n      finishPullDown();\n    };\n    scroll.on('pullingDown', pullingDownHandler);\n\n    return () => {\n      scroll.stop();\n      scroll.destroy();\n    };\n  }, [state.id]);\n\n  // load more finish\n  const finishPullDown = (): void => {\n    scroll.finishPullDown();\n    setTimeout(() => {\n      scroll.refresh();\n    }, 800);\n  };\n\n  const scrollToBottom = (): void => {\n    scroll.scrollTo(0, scroll.maxScrollY);\n  };\n\n  const sendComment = (): void => {\n    console.log(123);\n  };\n\n  return (\n    <div className=\"chat-main\">\n      <div className=\"chat-main-header\">\n        <div className=\"chat-main-header-user\">\n          <Avatar size=\"large\" src=\"https://api.sunweihu.com/api/sjtx/api.php\" />\n          <div>\n            <h3>嘟嘟</h3>\n            <span>正在输入...</span>\n          </div>\n        </div>\n        <div className=\"chat-main-header-action\">\n          <Button className=\"chat-main-header-action-btn\" icon={<PhoneTwoTone />} />\n          <Button className=\"chat-main-header-action-btn\" icon={<VideoCameraTwoTone />} />\n          <Button className=\"chat-main-header-action-btn\" icon={<EllipsisOutlined />} />\n        </div>\n      </div>\n      <div className=\"chat-main-body\">\n        <div className=\"chat-main-body-wrapper\">\n          <div className=\"messages\">\n            {isPullingDown ? (\n              <div className=\"loader\">\n                <Spin indicator={antIcon} spinning={true} />\n              </div>\n            ) : null}\n            {comments.map((comment: any) => {\n              return (\n                <div\n                  className={[\n                    'message-item',\n                    comment.type === 'mine' ? 'outgoing-message' : '',\n                  ].join(' ')}\n                  key={comment.id}\n                >\n                  <div className=\"message-item-header\">\n                    <Avatar size=\"large\" src={comment.avatar + `?${comment.id}`} />\n                    <div>\n                      <h3>{comment.name}</h3>\n                      <div className=\"time\">{comment.date}</div>\n                    </div>\n                  </div>\n                  <div className=\"message-item-content\">{comment.content}</div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n      <div className=\"chat-main-footer\">\n        <div className=\"chat-main-footer-input\">\n          <TextArea rows={3} />\n        </div>\n        <div className=\"chat-main-footer-btns\">\n          <div>\n            <Button icon={<SmileOutlined />} />\n            <Button icon={<PlusCircleOutlined />} />\n          </div>\n          <Button type=\"primary\" onClick={sendComment}>\n            发送\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatMain;\n","import React, { FC, useState, useContext } from 'react';\nimport { Input, Form, Button, Avatar } from 'antd';\nimport { Context } from '../../index';\nimport { CLOSE_MODAL } from '../../context';\n\nconst { TextArea } = Input;\n\nconst ModalAddGroup: FC = () => {\n  const [form] = Form.useForm();\n\n  const { dispatch } = useContext(Context);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const onCreateGroup = (): void => {\n    setLoading((prev) => (prev = true));\n    setTimeout(() => {\n      setLoading((prev) => (prev = false));\n      if (dispatch) {\n        dispatch({ type: CLOSE_MODAL });\n      }\n    }, 1000);\n  };\n  return (\n    <Form layout=\"vertical\" form={form}>\n      <Form.Item label=\"分组名称\">\n        <Input />\n      </Form.Item>\n      <Form.Item label=\"分组成员\">\n        <Avatar.Group\n          maxCount={5}\n          size=\"large\"\n          maxStyle={{ color: '#f56a00', backgroundColor: '#fde3cf' }}\n        >\n          {[1, 2, 3].map((i) => {\n            return <Avatar key={i} src={'https://api.sunweihu.com/api/sjtx/api.php?' + i} />;\n          })}\n        </Avatar.Group>\n      </Form.Item>\n      <Form.Item label=\"描述\">\n        <TextArea rows={3} />\n      </Form.Item>\n      <Form.Item className=\"al-right\">\n        <Button loading={loading} type=\"primary\" onClick={onCreateGroup}>\n          创建分组\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default ModalAddGroup;\n","import React, { FC, useReducer, createContext } from 'react';\nimport { reducer, defaultState, MixStateAndDispatch } from './context';\nimport { Modal } from 'antd';\nimport './index.less';\nimport ChatNavigation from './components/chat-navigation';\nimport SidebarMessage from './components/sidebar-message';\nimport SidebarFriends from './components/sidebar-friends';\nimport SidebarFavorites from './components/sidebar-favorites';\nimport ChatMain from './components/chat-main';\nimport ModalAddGroup from './components/modal-add-group';\nimport { CLOSE_MODAL } from './context';\n\nexport const Context = createContext<MixStateAndDispatch>({\n  state: defaultState,\n});\n\nconst Chat: FC = () => {\n  const [state, dispatch] = useReducer(reducer, defaultState);\n\n  const handleCancel = (): void => {\n    dispatch({ type: CLOSE_MODAL });\n  };\n\n  const ModelContent = (): React.ReactElement | null => {\n    switch (state.modalOptions.type) {\n      case 'add_group':\n        return <ModalAddGroup />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className={['chat', state.mode].join(' ')}>\n      <Context.Provider value={{ state, dispatch }}>\n        <div className=\"chat-layout\">\n          <ChatNavigation />\n          <div className=\"chat-layout-content\">\n            <div className=\"sidebar-group\">\n              {(() => {\n                switch (state.selectNavKey) {\n                  case 'message':\n                    return <SidebarMessage />;\n                  case 'friends':\n                    return <SidebarFriends />;\n                  case 'favorites':\n                    return <SidebarFavorites />;\n                  default:\n                    return <SidebarMessage />;\n                }\n              })()}\n            </div>\n            {state.id ? <ChatMain /> : null}\n          </div>\n        </div>\n        <Modal\n          visible={state.modalVisible}\n          title={state.modalOptions.title}\n          onCancel={handleCancel}\n          footer={null}\n        >\n          <ModelContent />\n        </Modal>\n      </Context.Provider>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"sourceRoot":""}